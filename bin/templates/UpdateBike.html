<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
  <title>Community Bike Share Web Application</title> 
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
   	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css"/>
    <link href="/css/bootstrap.min.css" rel="stylesheet"/>
    <style>
   
   /*body {
       margin: 0;
     background: url('/images/generic_bg_img.jpg');
     background-size: 100%;
     background-repeat:no-repeat;
     display: compact;
     font: 13px/18px "Helvetica Neue", Helvetica, Arial, sans-serif;
  }*/
  </style>
  </head>
<body>
<nav class="navbar navbar-default navbar-blue" role="navigation">
    <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->

	    <div class="navbar-header">
	       <a class="navbar-brand" href="#" th:href="@{/api/v1/users/dashboard}">Bike Share</a>
	      <a class="navbar-brand">Welcome User</a>
	    </div>
    
     	<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
     
	      <ul class="nav navbar-nav navbar-right">
	
	        <li><a href="#" th:href="@{/about}">About Us</a></li>
	        <li class="active"><a href="#" th:href="@{/logout}">LogOut</a></li>
	      </ul>
    	</div>   
    
	 </div><!-- /.container-fluid -->

 </nav>
 
<!-- <p th:text="'address: ' + ${oldBike.address}"/> 
<p th:text="'bikeCode: ' + ${oldBike.bikeCode}"/> 
 <p th:text="'email: ' + ${userEmail}"/> -->
<div class="col-md-6 col-md-offset-3"> 
<div class="panel panel-default">
<form action="#"  th:object="${newBike}"  role="form"><!--method="post" th:action="@{/api/v1/bike/updateBike}" -->
<div class="panel-body">
 <div class="form-group">
    <label for="bikeId" >Bike Id</label>
   <input type="text" class="form-control" id="bikeId"  th:value="${oldBike.bikeId}" /> <!--th:field="*{bikeId}"-->
  </div>

  <div class="form-group">
    <label for="address" >Address/Zip Code</label>
     <input type="text" class="form-control" id="address" th:value="${oldBike.address}"  /> <!--th:field="*{address}" th:field= "${newBike.address}"/> -->
  </div>
		
  <div class="form-group">
    <label for="accessories">Accessories</label>
   <input type="text" class="form-control" id="accessories" th:value="${oldBike.accessories}"   /> <!-- th:field="*{accessories}" th:field="*{accessories}"/>-->
  </div>
  
   <div class="form-group">
   <label for="userEmail">User Email</label> <br/>
  <input type="text" name="userEmail" id="userEmail"  th:value="${oldBike.userEmail}"  /><!--th:field="*{userEmail}" -->
   </div>
 
   <div class="form-group">
    <label for="fromDate">From Date</label>
   <input type="text" class="form-control" id="fromDate" placeholder="MM-dd-yyyy"/> <!--th:value="${oldBike.fromDate}" --> <!-- th:field="*{fromDate}" th:field="*{description}"/>-->
  </div>

  <div class="form-group">
    <label for="toDate">To Date</label>
    <input type="text" class="form-control" id="toDate" placeholder="MM-dd-yyyy"/> <!-- th:field="*{description}"  th:field="*{toDate}" th:value="${oldBike.toDate}"/>-->
  </div>
  
   <div class="form-group">
    <label for="bikeCode">Bike Code</label>
    <input type="text" class="form-control" id="bikeCode"  th:value="${oldBike.bikeCode}" /> <!--th:field="*{bikeCode}" th:field="*{bikeCode}"/>-->
  </div>
  
  <button id="submit" type="submit" class="btn btn-default" onclick="updateBikeAjax()">Update</button>
  </div>
</form> 
</div>
</div>
<script src ="/js/jquery-1.11.1.min.js"></script>
<script src ="/js/bootstrap.min.js"></script>
 <script>
  function updateBikeAjax() {  
    var address = $('#address').val();
    var bikeId = $('#bikeId').val();
    var accessories = $('#accessories').val();
    var userEmail = $('#userEmail').val();
    var fromDate = $('#fromDate').val();
    var toDate = $('#toDate').val();
    var bikeCode = $('#bikeCode').val();

    //var formatedfromDate=fromDate.getMonth()+1 + "-" + fromDate.getDate() + "-" + fromDate.getYear();
    //alert ("verification code has been sent to your mobile.");
    
    $.ajax({
      type: "POST",
      url: "http://localhost:8080/api/v1/bike/updateBike",
      contentType: 'application/json',
     
      data:JSON.stringify({address:address,bikeId:bikeId,accessories:accessories,userEmail:userEmail,fromDate:fromDate,toDate:toDate,bikeCode:bikeCode}),
      dataType: "json"
     })
      .done(function( ) {
        alert( "Data Saved: ");
	      console.log("Bike updated");
      })
      .fail(function() {
	      console.log("Bike could not be updated");
       });
     // reload the update page to reflect changes
     location.reload(true);
     location.reload(false);
     //window.location.reload(false);
     //window.location.reload(false);
     //window.location.reload(false);
  }
    
  </script>
</body>
</html>
